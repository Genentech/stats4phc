<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Sensitivity and specificity risk estimates"><title>Sensitivity and specificity plot — sensSpec • stats4phc</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Sensitivity and specificity plot — sensSpec"><meta property="og:description" content="Sensitivity and specificity risk estimates"><meta property="og:image" content="https://genentech.github.io/stats4phc/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">stats4phc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.01</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/stats4phc.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reports">Reports</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reports">
    <a class="dropdown-item" href="../coverage-report/">Coverage report</a>
    <a class="dropdown-item" href="../unit-test-report/">Unit test report</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://www.github.com/genentech/stats4phc">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sensitivity and specificity plot</h1>
      
      <div class="d-none name"><code>sensSpec.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Sensitivity and specificity risk estimates</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sensSpec</span><span class="op">(</span></span>
<span>  <span class="va">outcome</span>,</span>
<span>  <span class="va">score</span>,</span>
<span>  methods <span class="op">=</span> <span class="st">"asis"</span>,</span>
<span>  show.best <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot.raw <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rev.order <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>outcome</dt>
<dd><p>Vector of binary outcome for each observation.</p></dd>


<dt>score</dt>
<dd><p>Numeric vector of continuous predicted risk score.</p></dd>


<dt>methods</dt>
<dd><p>Character vector of method names (case-insensitive) for plotting curves or
a named list where elements are method function and its arguments.
Default is set to <code>"asis"</code>.</p>
<p>Full options are: <code>c("asis", "binned", "pava", "mspline", "gam", "cgam")</code>.</p>
<p>To specify arguments per method, use lists. For example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="at">pava =</span> <span class="fu">list</span>(<span class="at">method =</span> <span class="st">"pava"</span>, <span class="at">ties =</span> <span class="st">"primary"</span>),</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="at">mspline =</span> <span class="fu">list</span>(<span class="at">method =</span> <span class="st">"mspline"</span>, <span class="at">fitonPerc =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="at">gam =</span> <span class="fu">list</span>(<span class="at">method =</span> <span class="st">"gam"</span>, <span class="at">bs =</span> <span class="st">"tp"</span>, <span class="at">logscores =</span> <span class="cn">FALSE</span>),</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="at">bin =</span> <span class="fu">list</span>(<span class="at">method =</span> <span class="st">"binned"</span>, <span class="at">bins =</span> <span class="dv">10</span>),</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="at">risk =</span> <span class="fu">list</span>(<span class="at">method =</span> <span class="st">"asis"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>)</span></code></pre><p></p></div>
<p>See section "Estimation" for more details.</p></dd>


<dt>show.best</dt>
<dd><p>Logical; Include best possible sensitivity and specificity? Defaults to <code>TRUE</code>.</p></dd>


<dt>plot.raw</dt>
<dd><p>Logical to show percentiles or raw values.
Defaults to <code>FALSE</code> (i.e. percentiles).</p></dd>


<dt>rev.order</dt>
<dd><p>Logical, reverse ordering of scores. Defaults to <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list containing the plot and data.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Given individual binary outcomes and scores, this function plots sensitivity and specificity
(using each score as a cutoff) on their respective score percentiles.</p>
    </div>
    <div class="section level2">
    <h2 id="estimation">Estimation<a class="anchor" aria-label="anchor" href="#estimation"></a></h2>
    

<p>The <code>methods</code> argument specifies the estimation method.
You can provide either a vector of strings, any of</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"asis"</span>, <span class="st">"binned"</span>, <span class="st">"pava"</span>, <span class="st">"mspline"</span>, <span class="st">"gam"</span>, <span class="st">"cgam"</span>)</span></code></pre><p></p></div>
<p>(<code>"asis"</code> is not available for <code>calibrationProfile</code>),
or a named list of lists.
In the latter case, the inner list must have an element "method",
which specifies the estimation function (one of those above),
and optionally other elements, which are passed to the estimation function.
For example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="at">gam =</span> <span class="fu">list</span>(<span class="at">method =</span> <span class="st">"gam"</span>, <span class="at">k =</span> <span class="dv">3</span>),</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="at">c_gam =</span> <span class="fu">list</span>(<span class="at">method =</span> <span class="st">"cgam"</span>, <span class="at">numknots =</span> <span class="dv">3</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>)</span></code></pre><p></p></div>
<p>To see what arguments are available for each estimation method,
see the documentation of that function.
The naming convention is <code>getXest</code>,
where <code>X</code> stands for the estimation method, for example <code><a href="getGAMest.html">getGAMest()</a></code>.</p>
<p>"gam", "cgam", and "mspline" always fit on percentiles by default.
To change this, use <code>fitonPerc = FALSE</code>, for example</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">list</span>(<span class="at">gam =</span> <span class="fu">list</span>(<span class="at">method =</span> <span class="st">"gam"</span>, <span class="at">fitonPerc =</span> <span class="cn">FALSE</span>))</span></code></pre><p></p></div>
<p>"gam" and "cgam" methods are wrappers of <code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">mgcv::gam()</a></code> and <code><a href="https://rdrr.io/pkg/cgam/man/cgam.html" class="external-link">cgam::cgam()</a></code>, respectively.
The default values of function arguments (like <code>k</code>, the number of knots in <code><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">mgcv::s()</a></code>)
mirror the package defaults.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="riskProfile.html">riskProfile()</a></code> <code><a href="calibrationProfile.html">calibrationProfile()</a></code></p>
<p><code><a href="getPAVAest.html">getPAVAest()</a></code> <code><a href="getBINNEDest.html">getBINNEDest()</a></code> <code><a href="getGAMest.html">getGAMest()</a></code> <code><a href="getCGAMest.html">getCGAMest()</a></code> <code><a href="getMSPLINEest.html">getMSPLINEest()</a></code>
<code><a href="getASISest.html">getASISest()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Read in example data</span></span></span>
<span class="r-in"><span><span class="va">auroc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sample.csv"</span>, package <span class="op">=</span> <span class="st">"stats4phc"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rscore</span> <span class="op">&lt;-</span> <span class="va">auroc</span><span class="op">$</span><span class="va">predicted_calibrated</span></span></span>
<span class="r-in"><span><span class="va">truth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">auroc</span><span class="op">$</span><span class="va">actual</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot sensitivity and specificity</span></span></span>
<span class="r-in"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">sensSpec</span><span class="op">(</span>outcome <span class="op">=</span> <span class="va">truth</span>, score <span class="op">=</span> <span class="va">rscore</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p1</span><span class="op">$</span><span class="va">plot</span></span></span>
<span class="r-plt img"><img src="sensSpec-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same with smoothed estimates</span></span></span>
<span class="r-in"><span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">sensSpec</span><span class="op">(</span>outcome <span class="op">=</span> <span class="va">truth</span>, score <span class="op">=</span> <span class="va">rscore</span>, methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"asis"</span>, <span class="st">"gam"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p2</span><span class="op">$</span><span class="va">plot</span></span></span>
<span class="r-plt img"><img src="sensSpec-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ondrej Slama, Darrick Shen, Verena Steffen, Doug Kelkhoff, Michel Friesenhahn, Christina Rabe, F. Hoffmann-La Roche AG.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

